<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Get Yo Scrip</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			font-family: sans-serif;
		}

		h1 {
			text-align: center;
			font-weight: bold;
			font-size: 2em;
			margin: 1em 0;
		}

		h3 {
			font-weight: bold;
			font-size: 1.2em;
			margin: 1.5em 0 0.5em;
		}

		table {
			border-collapse: collapse;
			width: 80%;
			margin: 2em auto;
		}

		td {
			padding: 0.5em;
			border: 1px solid black;
			vertical-align: middle;
		}

		label {
			margin-right: 1em;
		}

		input[type=text], input[type=url] {
			width: 100%;
			padding: 0.5em;
			border-radius: 5px;
			border: 1px solid gray;
			margin-bottom: 1em;
		}

		input[type=checkbox] {
			margin-right: 0.5em;
		}

		.btn {
			display: block;
			margin: 2em auto;
			padding: 0.5em 1em;
			background-color: #4CAF50;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 1.2em;
		}

		.code-box {
			width: 80%;
			margin: 2em auto;
			padding: 1em;
			border: 1px solid gray;
			border-radius: 5px;
			font-size: 0.8em;
			white-space: pre-wrap;
		}

		.copy-btn {
			float: right;
			margin-top: -1.8em;
			margin-right: 0.5em;
			padding: 0.5em 1em;
			background-color: #4CAF50;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 0.8em;
		}
	</style>
</head>
<body>
    <h2>Input your details</h2>
    
    <form id="script-form">
      
      <!-- First question -->
      <div class="form-group">
        <label for="aid">AID:</label>
        <input type="text" id="aid" name="aid" required>
      </div>
	    
<!-- Second question -->
<div class="form-group">
  <h3>Exclude Providers</h3>
  <label><input type="checkbox" name="exclude_providers[]" value="all" id="exclude-all" checked>ALL (Pop only)</label><br>
  <label><input type="checkbox" name="exclude_providers[]" value="booking" id="exclude-booking">Booking</label><br>
  <label><input type="checkbox" name="exclude_providers[]" value="expedia" id="exclude-expedia">Expedia</label><br>
  <label><input type="checkbox" name="exclude_providers[]" value="vrbo" id="exclude-vrbo">VRBO</label><br>
  <label><input type="checkbox" name="exclude_providers[]" value="hotelscom" id="exclude-hotelscom">Hotels.com</label><br>
  <label><input type="checkbox" name="exclude_providers[]" value="tripadvisor" id="exclude-tripadvisor">TripAdvisor</label><br>
  <label><input type="checkbox" name="exclude_providers[]" value="hotelscombined" id="exclude-hotelscombined">Hotelscombined</label><br>
  <label><input type="checkbox" name="exclude_providers[]" value="none" id="exclude-none">None</label>
</div>
<!-- Third question -->
<div class="form-group">
  <h3>Grab existing links from</h3>
  <label><input type="checkbox" name="grab_links[]" value="none" checked>None</label><br>
  <label><input type="checkbox" name="grab_links[]" value="cj">CJ</label><br>
  <label><input type="checkbox" name="grab_links[]" value="travel_payouts">TravelPayouts</label><br>
  <label><input type="text" name="grab_links[]" placeholder="Custom link">Custom</label>
</div>
<!-- Submit button -->
<button type="submit" class="btn">Generate Script</button>

</form>
<!-- Output box -->
<div id="output-box" style="display:none">
  <h3>Generated Script:</h3>
  <div class="code-box">
    <pre id="output-code"></pre>
    <button class="copy-btn">Copy to Clipboard</button>
  </div>
</div>


	<script>
function generateScript() {
  const aid = document.getElementById("aid").value;
  const excludes = Array.from(document.querySelectorAll('input[name="exclude_providers[]"]:checked'))
    .map(input => input.value)
    .filter(value => value !== "all");
  const links = Array.from(document.querySelectorAll('input[name="grab_links[]"]:checked'))
    .map(input => input.value)
    .filter(value => value !== "none");
  const customLink = document.getElementById("grab-custom").value;
  const partnerUrl = document.getElementById("partner-url").value;

  let deepStruct = [];

  if (links.includes("cj")) {
    deepStruct = ["fave.co/","anrdoezrs.net/click","kqzyfj.com/click","dpbolvw.net/click","tkqlhce.com/click","jdoqocy.com/click"];
  }

  if (links.includes("travel_payouts")) {
    deepStruct = ["tp.st/", "tp.media/"];
  }

  if (customLink !== "") {
    deepStruct.push(customLink);
  }

  const params = {
    aid: `"${aid}"`,
    excludes: excludes.length > 0 ? JSON.stringify(excludes) : undefined,
    deepStruct: deepStruct.length > 0 ? JSON.stringify(deepStruct) : undefined,
    partner_url: partnerUrl !== "" ? partnerUrl : undefined,
  };

  const script = `
    <script>
      (function (s, t, a, y, twenty, two) {
        s.Stay22 = s.Stay22 || {};
        s.Stay22.params = ${JSON.stringify(params, null, 2)};
        twenty = t.createElement(a);
        two = t.getElementsByTagName(a)[0];
        twenty.async = 1;
        twenty.src = y;
        two.parentNode.insertBefore(twenty, two);
      })(window, document, "script", "https://scripts.stay22.com/letmeallez.js");
    <\/script>
  `;

  const outputCode = document.getElementById("output-code");
  outputCode.textContent = script;
  const outputBox = document.getElementById("output-box");
  outputBox.style.display = "block";
}


const scriptForm = document.getElementById("script-form");
scriptForm.addEventListener("submit", (event) => {
  event.preventDefault();
  generateScript();
});

</script>

</body>
</html>

